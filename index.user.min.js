(function(){function a(){function m(t,u){let v=t,w=v.querySelector("span").getAttribute("class"),y=[],z=!1;if(-1===w.indexOf("active"))y=w.split(" "),w=y[0]+" "+y[1]+"-active "+y[2],h.push(u);else{w=w.replace("-active",""),z=!0;let P=h.indexOf(u);-1!==P&&h.splice(P,1)}v.querySelector("span").setAttribute("class",w);let A=b(v),B=c(v),C=decodeURIComponent(B.href),D=A.getAttribute("param"),E=[];E[0]=D;let F=new RegExp(E[0]+"=([a-z,\\-0-9]+)","gi"),G="";G=-1===C.indexOf(E[0])?F.exec(g)[1]:F.exec(C)[1];let H=G.split(","),I=[],J="",K=[];if(-1!==g.indexOf(E[0])){let P=new RegExp(E[0]+"=([a-z,\\-0-9]+)","gi");J=P.exec(g)[1],K=J.split(",")}if(-1!==f.indexOf(E[0])){F=new RegExp(E[0]+"=([a-z,\\-0-9]+)","gi");let P=F.exec(f)[1];if(I=P.split(","),-1!==g.indexOf(E[0]))E[1]=H.filter(Q=>!K.includes(Q)).concat(K.filter(Q=>!H.includes(Q))).join(""),""==E[1]&&1==H.length&&(E[1]=H[0]);else if(z)E[1]=H[0];else for(let Q=0;Q<H.length;Q++){for(let R=0;R<I.length;R++){if(H[Q]==I[R]){E[1]="";break}E[1]=H[Q]}if(E[1])break}}else{let P=H.filter(Q=>!K.includes(Q)).concat(K.filter(Q=>!H.includes(Q))).join("");E[1]=P,""==P&&1==H.length&&(E[1]=H[0])}let L=f.match(/\/[a-z\-0-9]+=([a-z=0-9;,\-]+)\//gi),M=[],N=!1,O=new RegExp(/\/[a-z\-0-9]+=([a-z=0-9;,\-]+)\//gi);if(O.test(f)){L=L[0].replace(/\//g,""),L=L.split(";");for(let Q=0;Q<L.length;Q++){M=L[Q].split("=");let R=M[0],S=M[1];if(R===E[0]){N=!0;let T=S.split(",");if(!z)T.push(E[1]);else if(1<T.length)for(let U=0;U<T.length;U++)T[U]==E[1]&&T.splice(U,1);else{L.splice(Q,1),Q--;continue}M[1]=T.join(",")}L[Q]=M.join("=")}N||L.push(E.join("="));let P=L.join(";");0!==L.length&&(P+="/"),f=f.replace(/[a-z0-9\-]+=[a-z=0-9;,\-]+\//ig,P)}else f+=E.join("=")+"/"}let n=j.querySelectorAll("li"),o=j.querySelectorAll("li a"),p=j.querySelectorAll("li label"),r=o.length;f=window.location.href,g=f,h=[];let s=function(t,u){t.addEventListener("click",function(v){v.preventDefault(),m(this,u),d(u),v.stopPropagation()},!1)};for(let t=0;t<r;t++)s(o[t],t),s(p[t],t),n[t].setAttribute("style","margin:3px 6px 5px 5px;padding:0;"),0<=o[t].querySelector("span").getAttribute("class").indexOf("active")&&h.push(t)}function b(m){return"DIV"!==m.tagName||null===m.getAttribute("param")?b(m.parentNode):m}function c(m){return"LABEL"===m.tagName?m.querySelector("a"):m}function d(m){let n=j.querySelectorAll("li label")[m];-1===h.indexOf(m)&&1<=h.length&&(n=j.querySelectorAll("li label")[h[h.length-1]]);let o=0;1<n.querySelectorAll("i").length&&(o=1);let p=n.querySelectorAll("i")[o].getBoundingClientRect().left,r=n.getBoundingClientRect().top,s=n.querySelectorAll("i")[o].getBoundingClientRect().width,t=n.getBoundingClientRect().height,u=window.pageYOffset,v=window.pageXOffset;k.style.left=p+s+v+10+"px",k.style.top=r-(k.offsetHeight-t)/2+u+"px",k.style.visibility="visible",h.length||(k.style.visibility="hidden")}let f="",g="",h=[],j=document.querySelector("#catalog_filters_block");null!==j&&(a(),new MutationObserver(function(){a()}).observe(document.querySelector("div#catalog_filters_block"),{childList:!0}));let k=document.getElementById("injectedButton");k.addEventListener("click",function(){window.location.href=f})})();